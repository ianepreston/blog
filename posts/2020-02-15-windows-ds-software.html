<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2020-02-15">
<meta name="description" content="My opinionated setup to do data work in python on Windows, without admin rights.">

<title>Ian’s blog - Setting up for data science in python on Windows</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Ian’s blog</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html">
 <span class="menu-text">about</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/ianepreston"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Setting up for data science in python on Windows</h1>
                  <div>
        <div class="description">
          My opinionated setup to do data work in python on Windows, without admin rights.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">data</div>
                <div class="quarto-category">python</div>
                <div class="quarto-category">configuration</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 15, 2020</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#install-vs-code" id="toc-install-vs-code" class="nav-link active" data-scroll-target="#install-vs-code">Install VS Code</a>
  <ul class="collapse">
  <li><a href="#app-installation" id="toc-app-installation" class="nav-link" data-scroll-target="#app-installation">App installation</a></li>
  <li><a href="#extensions" id="toc-extensions" class="nav-link" data-scroll-target="#extensions">Extensions</a></li>
  <li><a href="#finish-up-later" id="toc-finish-up-later" class="nav-link" data-scroll-target="#finish-up-later">Finish up later</a></li>
  </ul></li>
  <li><a href="#install-git-and-bash" id="toc-install-git-and-bash" class="nav-link" data-scroll-target="#install-git-and-bash">Install git and bash</a>
  <ul class="collapse">
  <li><a href="#customizing-git" id="toc-customizing-git" class="nav-link" data-scroll-target="#customizing-git">Customizing git</a></li>
  <li><a href="#set-up-ssh" id="toc-set-up-ssh" class="nav-link" data-scroll-target="#set-up-ssh">Set up ssh</a>
  <ul class="collapse">
  <li><a href="#ssh-note" id="toc-ssh-note" class="nav-link" data-scroll-target="#ssh-note">SSH note</a></li>
  </ul></li>
  <li><a href="#additional-utilities" id="toc-additional-utilities" class="nav-link" data-scroll-target="#additional-utilities">Additional utilities</a></li>
  <li><a href="#further-reading" id="toc-further-reading" class="nav-link" data-scroll-target="#further-reading">Further reading</a></li>
  </ul></li>
  <li><a href="#install-miniconda" id="toc-install-miniconda" class="nav-link" data-scroll-target="#install-miniconda">Install Miniconda</a>
  <ul class="collapse">
  <li><a href="#actually-building-environments" id="toc-actually-building-environments" class="nav-link" data-scroll-target="#actually-building-environments">Actually building environments</a></li>
  </ul></li>
  <li><a href="#back-to-vs-code" id="toc-back-to-vs-code" class="nav-link" data-scroll-target="#back-to-vs-code">Back to VS code</a>
  <ul class="collapse">
  <li><a href="#user-settings" id="toc-user-settings" class="nav-link" data-scroll-target="#user-settings">User settings</a></li>
  <li><a href="#further-resources" id="toc-further-resources" class="nav-link" data-scroll-target="#further-resources">Further Resources</a></li>
  </ul></li>
  <li><a href="#cleaning-up-an-old-install" id="toc-cleaning-up-an-old-install" class="nav-link" data-scroll-target="#cleaning-up-an-old-install">Cleaning up an old install</a>
  <ul class="collapse">
  <li><a href="#uninstall-apps" id="toc-uninstall-apps" class="nav-link" data-scroll-target="#uninstall-apps">Uninstall Apps</a></li>
  <li><a href="#remove-miscellaneous-crud" id="toc-remove-miscellaneous-crud" class="nav-link" data-scroll-target="#remove-miscellaneous-crud">Remove miscellaneous crud</a></li>
  <li><a href="#remove-config-files" id="toc-remove-config-files" class="nav-link" data-scroll-target="#remove-config-files">Remove config files</a></li>
  </ul></li>
  <li><a href="#wrapping-up" id="toc-wrapping-up" class="nav-link" data-scroll-target="#wrapping-up">Wrapping up</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>There are lots of great guides for setting up an environment to do data science. For my purposes though they generally lack two things:</p>
<ul>
<li>They’re designed for Mac/Linux and I run Windows at work</li>
<li>They just don’t match my exact personal taste/environment</li>
</ul>
<p>This guide is intended to be useful for anyone trying to get set up for data science in python on windows. I think most of the steps are fairly generic, and I’ll make an effort to highlight the parts that are more opinionated. The sections below will go over the core software that will need to be installed, and some handy customizations.</p>
<p><em>edit 2020-02-17</em> - I realized I wanted make as well, so I added a section on that. Also made note of an issue with launching interactive python from git bash, as well as solutions.</p>
<p><em>edit 2020-08-04</em> - I started using pylance for a python language server, discovered SQL formatter, and switched to the regular Vim plugin.</p>
<p><em>edit 2020-10-28</em> - Add instructions for clearing out an old install, do everything as a user level install. I cleaned up some other instructions as I went through as well.</p>
<p><em>edit 2020-11-02</em> - Remove reference to pyenv-win. It’s too much of a hassle. Unfortunately my best advice there is to get access to a *NIX environment somehow.</p>
<section id="install-vs-code" class="level1">
<h1>Install VS Code</h1>
<p>First we need an editor to actually work in. I’m a huge fan of VS code for this. It’s lightweight, extensible, free and open source, and very actively developed. Every month there’s a new release with some fancy thing that makes my life easier.</p>
<section id="app-installation" class="level2">
<h2 class="anchored" data-anchor-id="app-installation">App installation</h2>
<p>Head to the <a href="https://code.visualstudio.com/download#">VS code download page</a> and pick the Win64 user installer.</p>
<p>Go through the install process, I think all the defaults are fine, so just keep hitting next. You can optionally add in things like “Add open with code action to Windows Explorer”. It won’t directly impact the rest of what we’re doing, just integrates code with the rest of your desktop a little more fully.</p>
<p>You can sign in with either a GitHub or Microsoft account to enable setting sync. If you use VS code on multiple machines, or just want to easily restore all your settings if you get a new computer I recommend enabling it. See the person icon in the lower left corner.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<figure class="figure">
<img src="windows_ds_software/code_01.png" title="settings sync" class="img-fluid figure-img">
</figure>
<p></p><figcaption class="figure-caption">settings sync</figcaption><p></p>
</figure>
</div>
<p>On the work machine I’m testing this guide on I’m getting a settings sync error, even though the same install is syncing on my home machine. I love computers. Oh well, it means I’ll get to really walk through a fresh install for this guide.</p>
</section>
<section id="extensions" class="level2">
<h2 class="anchored" data-anchor-id="extensions">Extensions</h2>
<p>What makes VS code so great is all its extensions. Here are some that are great:</p>
<ul>
<li>Bracket Pair Colorizer 2 colour codes your brackets. Super helpful for debugging.</li>
<li>Dracula Official is a nice dark theme. The Material themes are also nice.</li>
<li>GitLens integrates a lot of git functionality into VS code, things like showing who made what changes inline in your code.</li>
<li>indent-rainbow colour codes your indentation level, similar to the brackets</li>
<li>markdownlint gives style suggestions when writing markdown files (like this guide!)</li>
<li>Material icon theme makes the icons in the file explorer a little nicer</li>
<li>Python is pretty core for this for obvious reasons</li>
<li>Pylance is a new language server for Visual Studio, it offers nicer autocomplete and seems worth using.</li>
<li>Better TOML handles the config format of python packages</li>
<li>The Remote Development extension pack lets you run VS code on a local machine while developing on a remote system, Docker container, or WSL install.</li>
<li>SQL Formatter will clean up any sql queries you write</li>
<li>SQL Server (mssql) is very handy if you interact with SQL server. The first time you open this it will run a bunch of installers in the background.</li>
<li>Vim - Only install this if you know what Vim is and you want to use its keybindings. If you do this extension will make you very happy, if you don’t it will make you very sad.</li>
<li>Editorconfig - Lets VS Code parse <a href="https://editorconfig.org/">editorconfig</a> files.</li>
</ul>
</section>
<section id="finish-up-later" class="level2">
<h2 class="anchored" data-anchor-id="finish-up-later">Finish up later</h2>
<p>There’s more configuration to do in VS code, but prior to that let’s set up the actual applications we’ll use with it.</p>
</section>
</section>
<section id="install-git-and-bash" class="level1">
<h1>Install git and bash</h1>
<p>Like any sort of coding work, data science is done best under version control, and git is the defacto standard for that. Bash is not as obviously essential to coding/data science, but it comes with git, and using it for everything rather than the Windows shells will make it easier to apply instructions from other guides in the future, since most of them will assume you’re using bash. Plus I like bash way more than the command prompt or powershell.</p>
<p>git does not require any special admin privileges to install. Go to the <a href="https://git-scm.com/download/win">Git download page</a> and Choose 64-bit Git for Windows Setup and run the installer. First part is to read (if you want) and accept the license:</p>
<p><img src="windows_ds_software/git_01.png" title="git license" class="img-fluid"></p>
<p>The default path should be fine, but take note of where it’s being installed because we’ll need to point VS code to it later</p>
<p><img src="windows_ds_software/git_02.png" title="git path" class="img-fluid"></p>
<p>On the components selection screen I deselect git gui because I only ever want the terminal. If you like or want to try the gui you could leave that checked. I also check “Check daily for Git for Windows updates” because I don’t want to have to remember to update.</p>
<p><img src="windows_ds_software/git_03.png" title="git components" class="img-fluid"></p>
<p>The next thing you’ll be prompted for is for the default editor. If you’re comfortable with vim/nano/whatever you can change it to that. I’m going to use VS code because it’s the editor I’ll be using for everything else, and I’m going to add vim bindings to it anyway:</p>
<p><img src="windows_ds_software/git_04.png" title="git editor" class="img-fluid"></p>
<p>Next we get to pick the default branch name for new repositories. Historically this has been “master” but most organizations are moving away from that. I’ll pick “main”.</p>
<p><img src="windows_ds_software/git_045.png" title="default branch" class="img-fluid"></p>
<p>At the next prompt leave it on the default, we want VS code and other tools to know git exists.</p>
<p><img src="windows_ds_software/git_05.png" title="git path" class="img-fluid"></p>
<p>For the SSH executable we’ll use openssh. Later we’ll configure remote development with VS code and also have to use openssh there. If you use and like putty you could swap this out, but note that VS code (at least at time of this writing) doesn’t support putty, so you’ll have to set things up separately there.</p>
<p><img src="windows_ds_software/git_06.png" title="git ssh" class="img-fluid"></p>
<p>Next up is the https transport backend. If this is a personal machine you can probably just leave it on OpenSSL. If it’s a work computer you should probably switch to “Use the native Windows Secure Channel library”. For example, at work my git repos are hosted on an on prem TFS server, so I definitely want my AD Domain service to validate me.</p>
<p><img src="windows_ds_software/git_07.png" title="git ssl" class="img-fluid"></p>
<p>At the next prompt we again want the default. Windows and *NIX systems use different symbols to denote line endings. This setting will automatically convert to the Windows format when you pull down changes, but leave them *NIX style when you push them up. This will ensure everyone is getting the correct format of text file when pulling down changes.</p>
<p><img src="windows_ds_software/git_08.png" title="git line endings" class="img-fluid"></p>
<p>For the default behaviour for git pull I’m fine with fast-forward or merge. If you have a different preference by all means go for it.</p>
<p><img src="windows_ds_software/git_085.png" title="pull" class="img-fluid"></p>
<p>Leave the console on MinTTY, it works nicer than the other. I thought you might need it to be the Windows default console to integrate with VS code but that is not the case. In fact it seems to break console integration with VS code. Go figure.</p>
<p><img src="windows_ds_software/git_09.png" title="git terminal" class="img-fluid"></p>
<p>Using a credential manager means that once you’ve authenticated yourself for a repository you won’t have to do it every time. Unless you’re super paranoid leave this turned on.</p>
<p><img src="windows_ds_software/git_10.png" title="git credentials" class="img-fluid"></p>
<p>I just left the extra options on default</p>
<p><img src="windows_ds_software/git_11.png" title="extras" class="img-fluid"></p>
<p>I’m going to try enabling this feature, not being able to open a python console in bash was annoying.</p>
<p><img src="windows_ds_software/git_12.png" class="img-fluid"></p>
<section id="customizing-git" class="level2">
<h2 class="anchored" data-anchor-id="customizing-git">Customizing git</h2>
<p>There are a couple handy things that are useful to customize about git. For one, VS Code is going to make a .vscode folder anywhere we open a folder with it. We’re never going to want to commit that file to version control, so we’ll create a global gitignore file (as opposed to the more standard repository specific ones) and exclude that file. I got this idea from <a href="https://julien.danjou.info/properly-managing-your-gitignore/">this blog</a>, so credit there. In your <code>%UserProfile%\.config\git</code> folder, create a file named <code>ignore</code>. Mine is quite basic at this point:</p>
<pre class="git"><code>*.vscode</code></pre>
<p>If you find your setup generates other files you’d like to ignore put them here, but don’t use this file for language specific stuff like <code>.ipynb-checkpoints</code>, leave that to project specific <code>.gitignore</code> files.</p>
<p>The other thing that’s nice to do is clean up your default prompt. Notably, git bash by default includes <code>MINGW64</code> in the prompt. I guess this is the <code>$MSYSTEM$</code> environment variable, but I can’t imagine why I’d care to see that in my prompt. The other stuff it includes by default are pretty handy, but if you don’t like them you can modify the same file I’m going to point to to update your setup.</p>
<p>The file that contains your prompt information should be in either <code>%UserProfile%\AppData\Local\Programs\Git\etc\profile.d\git-prompt.sh</code>. This is a standard bash script, so if you’re familiar with bash scripting, or modifying your bashrc in Linux or Mac this will be familiar. If not, it’s generally pretty readable. Make a backup of it and fiddle. To get rid of the <code>MINGW64</code> we just have to find the lines that say</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="va">PS1</span><span class="op">=</span><span class="st">"</span><span class="va">$PS1</span><span class="st">"'\[\033[35m\]'</span>       <span class="co"># change to purple</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="va">PS1</span><span class="op">=</span><span class="st">"</span><span class="va">$PS1</span><span class="st">"'$MSYSTEM '</span>          <span class="co"># show MSYSTEM</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>and delete them or comment them out. I also got rid of</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="va">PS1</span><span class="op">=</span><span class="st">"</span><span class="va">$PS1</span><span class="st">"'\n'</span>                 <span class="co"># new line</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>so that my conda environment would be on the same line as the rest of my setup info.</p>
</section>
<section id="set-up-ssh" class="level2">
<h2 class="anchored" data-anchor-id="set-up-ssh">Set up ssh</h2>
<p>This will actually work exactly the same as Linux, which is nice. GitHub has nice <a href="https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh">docs</a> on how to generate keys and associate them with your GitHub account, so I won’t reiterate that here. Anything you can connect to via SSH rather than password you should though. It’s more secure, and more convenient.</p>
<section id="ssh-note" class="level3">
<h3 class="anchored" data-anchor-id="ssh-note">SSH note</h3>
<p>I had an old install of putty when I first set up git bash. Even though I told it to use OpenSSH I guess I still had putty set somewhere in my environment. I had to modify the <code>GIT_SSH</code> environment variable for my system to point to the git ssh utility, which in my case was at <code>C:\Program Files\Git\usr\bin\ssh</code>. Most people shouldn’t have to do this.</p>
</section>
</section>
<section id="additional-utilities" class="level2">
<h2 class="anchored" data-anchor-id="additional-utilities">Additional utilities</h2>
<p>Git bash has decent functionality out of the box, but there may be additional utilities you want to install. In my particular case, I’d like to be able to use <code>make</code> in my projects. Thanks to <a href="https://gist.github.com/evanwill/0207876c3243bbb6863e65ec5dc3f058#file-gitbash_windows-md">this gist</a> I found that it’s pretty easy to do. I’ll reproduce the <code>make</code> install instructions here, but all credit for this part goes to the original author.</p>
<p>Wherever you installed git bash there should be a <code>mingw64</code> folder. My home machine did a system install, so I found it in <code>C:\Program Files\Git\mingw64</code>, but my work one was a user level install, so that one ended up in <code>%UserProfile%\AppData\Local\Programs\Git\mingw64</code>. You can always find where it is by right clicking the shortcut to git bash in your start menu and hitting properties, that will show you the path.</p>
<blockquote class="blockquote">
<p>Keep in mind you can easy add <code>make</code>, but it doesn’t come packaged with all the standard UNIX build toolchain–so you will have to ensure those are installed <em>and</em> on your PATH, or you will encounter endless error messages.</p>
</blockquote>
<ul>
<li>Go to <a href="https://sourceforge.net/projects/ezwinports/files/">ezwinports</a>.</li>
<li>Download <code>make-4.1-2-without-guile-w32-bin.zip</code> (get the version without guile).</li>
<li>Extract zip.</li>
<li>Copy the contents to your <code>Git\mingw64\</code> merging the folders, but do NOT overwrite/replace any existing files.</li>
</ul>
<p>That was all I had to do to make the basic makefiles that I wanted to use. As noted above, if you want to actually build c packages or something your process will likely be more complex. For a great beginner friendly intro to makefiles in the context of python projects, check out <a href="https://calmcode.io/makefiles/the-problem.html">calm code</a>.</p>
</section>
<section id="further-reading" class="level2">
<h2 class="anchored" data-anchor-id="further-reading">Further reading</h2>
<p>The <a href="https://git-scm.com/">main git page</a> has tons of resources. I’ve also collected a few that I found useful under my <a href="https://tagpacker.com/user/ian.preston?t=git">Tagpacker page.</a></p>
</section>
</section>
<section id="install-miniconda" class="level1">
<h1>Install Miniconda</h1>
<p>Next up we install Miniconda to handle python and all its libraries for data science. You could go with Anaconda over Miniconda for a complete setup out of the box, but I want to do all my actual work in custom environments, so having all that stuff in the base environment is just bloat. Open up the link to the <a href="https://repo.anaconda.com/miniconda/Miniconda3-latest-Windows-x86_64.exe">Win64 MiniConda installer</a>, download and run the installer.</p>
<p>We’re avoiding using admin access so you can do this with even a locked down system so leave the option on “Just Me”</p>
<p><img src="windows_ds_software/conda_01.png" title="conda user" class="img-fluid"></p>
<p>Default install path should be fine.</p>
<p><img src="windows_ds_software/conda_02.png" title="conda path" class="img-fluid"></p>
<p>Check the box to add Anaconda to the system PATH environment variable, this will allow you to use conda from git bash. I’m unchecking the box that sets conda as the default system python because I want to have a pure python install available through pyenv (more on that later).</p>
<p><img src="windows_ds_software/conda_03.png" title="conda syspath" class="img-fluid"></p>
<p>Finally, open up anaconda prompt and run <code>conda init bash</code>. This will allow you to run <code>conda</code> commands from within bash. By default this will also activate the conda <code>base</code> environment whenever you open a terminal. We don’t actually want that, so restart git bash to allow the first command to take effect and then run <code>conda config --set auto_activate_base false</code>.</p>
<p>There’s one last thing we’ll have to do. The <code>conda init bash</code> command added some code that runs whenever you start a git bash terminal in order to allow you to run conda commands. That code is saved in <code>~/.bash_profile</code>. It will look something like this:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># &gt;&gt;&gt; conda initialize &gt;&gt;&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># !! Contents within this block are managed by 'conda init' !!</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="bu">eval</span> <span class="st">"</span><span class="va">$(</span><span class="st">'/c/Users/&lt;your username&gt;/Miniconda3/Scripts/conda.exe'</span> <span class="st">'shell.bash'</span> <span class="st">'hook'</span><span class="va">)</span><span class="st">"</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># &lt;&lt;&lt; conda initialize &lt;&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>What happens there is that whenever you open bash it runs all the commands in <code>.bash_profile</code> first. VS code for some reason does not run this script when you open a bash prompt in the built in terminal. Instead it runs <code>~/.bashrc</code> because why should anything be easy? Here’s the fix I’m using, thanks to <a href="https://stackoverflow.com/questions/57560017/stuck-when-setting-up-to-use-anaconda-with-vs-code-and-integrated-git-terminal">This StackOverflow post</a>.</p>
<p>move <code>.bash_profile</code> to <code>.bashrc</code> with <code>mv ~/.bash_profile ~/.bashrc</code>. Create a new <code>~/.bash_profile</code> file that just points to <code>~/.bashrc</code> so they’ll stay in sync whether you’re using regular git bash or VS code git bash. If you want to add anything else to your bash settings later just edit <code>.bashrc</code>. So now in your home directory (%UserProfile%) create a <code>.bash_profile</code> file (either using <code>touch .bash_profile</code> from bash or in VS code, you won’t be able to from Explorer) and put in the following lines:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="bu">[</span> <span class="ot">-f</span> ~/.bashrc <span class="bu">]</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">source</span> ~/.bashrc</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="cf">fi</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>That should take care of it for conda installation</p>
<section id="actually-building-environments" class="level2">
<h2 class="anchored" data-anchor-id="actually-building-environments">Actually building environments</h2>
<p>Conda environment management is a big separate topic. <a href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html">Their documentation</a> is really good, and I refer to it regularly.</p>
</section>
</section>
<section id="back-to-vs-code" class="level1">
<h1>Back to VS code</h1>
<section id="user-settings" class="level2">
<h2 class="anchored" data-anchor-id="user-settings">User settings</h2>
<p>VS code comes mostly with sensible defaults, but there are a few things I like to change. In VS code hit <code>F1</code> and type <code>Open settings (JSON)</code>. If you don’t see that option (it didn’t pop up for me the first time I tried it) just open settings and look for a setting that tells you to update it in <code>settings.json</code>. Below are my settings, minus the stuff that just got added through configuring the extensions described above:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"diffEditor.renderSideBySide"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"workbench.editor.enablePreviewFromQuickOpen"</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"workbench.editor.enablePreview"</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"workbench.colorTheme"</span><span class="fu">:</span> <span class="st">"Dracula"</span><span class="fu">,</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"workbench.iconTheme"</span><span class="fu">:</span> <span class="st">"material-icon-theme"</span><span class="fu">,</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"editor.rulers"</span><span class="fu">:</span> <span class="ot">[</span><span class="dv">88</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"editor.suggestSelection"</span><span class="fu">:</span> <span class="st">"first"</span><span class="fu">,</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"editor.acceptSuggestionOnEnter"</span><span class="fu">:</span> <span class="st">"off"</span><span class="fu">,</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"editor.minimap.enabled"</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"editor.lineNumbers"</span><span class="fu">:</span> <span class="st">"relative"</span><span class="fu">,</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"explorer.confirmDelete"</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"editor.wordWrap"</span><span class="fu">:</span> <span class="st">"on"</span><span class="fu">,</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"python.formatting.provider"</span><span class="fu">:</span> <span class="st">"black"</span><span class="fu">,</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"python.linting.enabled"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"python.linting.flake8Enabled"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"python.languageServer"</span><span class="fu">:</span> <span class="st">"Pylance"</span><span class="fu">,</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"git.confirmSync"</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"git.autofetch"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"editor.codeActionsOnSave"</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"search.exclude"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"**/node_modules"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"**/bower_components"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"**/env"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"**/venv"</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"files.watcherExclude"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"**/.ipynb_checkpoints/**"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"**/$tf/**"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"**/.git/objects/**"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"**/.git/subtree-cache/**"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"**/node_modules/**"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"**/env/**"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"**/venv/**"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"**/.hypothesis/**"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"files.exclude"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"*.sublime-*"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"**/__pycache__"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"**/.DS_Store"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"**/.git"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"**/.hypothesis/**"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"**/.ipynb_checkpoints"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"**/.pytest_cache"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"**/.vscode"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"**/*.log"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"**/*.lst"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"**/$tf"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"**/node_modules"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>        <span class="dt">"venv"</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Most of the settings have fairly clear names, and if you put them in your <code>settings.json</code> you’ll get a little mouseover tip that will tell you what they do.</p>
<p>While you can hand code in the option to have VS code use git bash it’s probably easier to hit F1 again and select “Terminal: Select Default Shell” and choose it there. That will add a line to your settings that tells VS code to use git bash.</p>
</section>
<section id="further-resources" class="level2">
<h2 class="anchored" data-anchor-id="further-resources">Further Resources</h2>
<p>There’s tons of stuff to learn about VS code to make it super handy. At a minimum, check out their <a href="https://code.visualstudio.com/shortcuts/keyboard-shortcuts-windows.pdf">keyboard shortcuts</a>. I’m collecting other useful resources (with a decent amount of overlap with vim stuff) on <a href="https://tagpacker.com/user/ian.preston?t=vs_code">my tagpacker</a>.</p>
</section>
</section>
<section id="cleaning-up-an-old-install" class="level1">
<h1>Cleaning up an old install</h1>
<p>I wanted to test drive my instructions before passing them along to a colleague. In order to be sure they’d actually work the way I think they should I needed to clear out my old environment. I’ll document my steps here. Hopefully this will be useful for anyone else looking to start a fresh environment on Windows.</p>
<section id="uninstall-apps" class="level2">
<h2 class="anchored" data-anchor-id="uninstall-apps">Uninstall Apps</h2>
<p>Even if you installed a program as a user level install, you’ll still be prompted for an Administrator password if you try and remove it from “Add/Remove Programs” in the control panel because… Windows. Running the actual uninstall exe file works fine though.</p>
<p>For git this should be located at <code>%UserProfile%\AppData\Local\Programs\Git\unins000.exe</code>. The uninstaller won’t remove that folder itself so delete it after you’ve run it.</p>
<p>VS code is in a similar location and follows a similar process <code>%UserProfile%\AppData\Local\Programs\Microsoft VS Code\unins000.exe</code>.</p>
<p>Miniconda as a user level install is in a slightly different place: <code>%UserProfile%\Miniconda3\Uninstall-Miniconda3.exe</code> You’ll be prompted for an admin password a couple times, but if you click “no” it still seems to work, which is cool I guess. It will prompt you to reboot and when it comes back up you should be clear.</p>
</section>
<section id="remove-miscellaneous-crud" class="level2">
<h2 class="anchored" data-anchor-id="remove-miscellaneous-crud">Remove miscellaneous crud</h2>
<p>Depending on how long you’ve been using your machine and how many different installs you’ve done you may or may not have these files. Here’s a list of the things I checked for and then removed from my machine:</p>
<ul>
<li><p>Orphan start menu entries in <code>%UserProfile\AppData\Roaming\Microsoft\Windows\Start Menu\Programs</code></p></li>
<li><p>Renmants in <code>C:\ProgramData</code>. In my case I had a folder for jupyter</p></li>
</ul>
</section>
<section id="remove-config-files" class="level2">
<h2 class="anchored" data-anchor-id="remove-config-files">Remove config files</h2>
<p>If you like how your configuration is set up there’s no major harm in keeping these things. I’m just removing them to make sure I have a fair comparison to how a fresh install would go. All paths in the list of stuff I’ve removed are relative to <code>%UserProfile%</code>.</p>
<ul>
<li>.conda</li>
<li>.config/configstore</li>
<li>.continuum</li>
<li>.cookiecutter_replay</li>
<li>.cookiecutters</li>
<li>.ipynb_checkpoints</li>
<li>.ipython</li>
<li>.jupyter</li>
<li>.matplotlib</li>
<li>.poetry</li>
<li>.software</li>
<li>.vscode</li>
<li>AppData</li>
<li>AppData</li>
<li>AppData</li>
<li>AppData</li>
<li>AppData-data</li>
<li>AppData</li>
<li>AppData</li>
<li>AppData</li>
<li>AppDataTools</li>
<li>AppData</li>
<li>AppData</li>
<li>AppData</li>
<li>AppData</li>
<li>AppData</li>
<li>AppData</li>
<li>AppData</li>
<li>.bash_history</li>
<li>.bash_profile</li>
<li>.flake8</li>
<li>.gitconfig</li>
<li>.git-credentials</li>
<li>.gitignore_global</li>
<li>.python_history</li>
</ul>
<p>As you can see, managing a python development environment creates a lot of crud on your system.</p>
</section>
</section>
<section id="wrapping-up" class="level1">
<h1>Wrapping up</h1>
<p>That’s about it! After following this guide you should have a very comfy software setup in Windows to do data science from.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>